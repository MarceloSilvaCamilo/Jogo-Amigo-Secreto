<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;400;700;900&display=swap" rel="stylesheet">

    <title>Amigo Secreto</title>

    <style>
        /* Estilo para os participantes sorteados */
        .sorted-list li {
            color: green;
            font-weight: bold;
        }

        /* Estilo para o ponto de interroga√ß√£o ao lado do nome sorteado */
        .sorted-list span {
            color: red;
            margin-left: 10px;
        }

        /* Estilo comum para bot√µes (Sortear, Reiniciar e Adicionar) */
        .button-draw, .button-reiniciar {
            display: block;
            width: 200px;
            margin: 10px auto;
            padding: 10px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
            text-align: center;
        }

        /* Estilo para o bot√£o Sortear (diferente do bot√£o Reiniciar) */
        .button-draw {
            background-color: #008CBA;
        }

        /* Estilo para o bot√£o quando passa o mouse sobre ele */
        .button-draw:hover, .button-reiniciar:hover {
            background-color: #45a049;
        }

        /* Estilo para o campo de input (Seu nome) */
        .input-name {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }

        /* Estilo quando o campo de input est√° em foco */
        .input-name:focus {
            outline: none;
            border-color: #4CAF50;
        }

        /* Alinhamento e estilo da se√ß√£o de bot√µes */
        .button-container {
            margin-top: 20px;
        }

        /* Alinha os campos de entrada ao centro da tela */
        .input-wrapper {
            width: 100%;
            text-align: center;
        }

        /* Estilo da se√ß√£o principal de conte√∫do */
        .main-content {
            font-family: 'Inter', sans-serif;
        }

        /* Estilo para o t√≠tulo das se√ß√µes */
        .section-title {
            text-align: center;
            margin: 20px 0;
        }

        /* Estilo para o bot√£o "Adicionar" */
        .button-add {
            display: block;
            width: 150px;
            margin: 10px auto;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        /* Estilo para o bot√£o "Adicionar" ao passar o mouse */
        .button-add:hover {
            background-color: #45a049;
        }

        /* Estilo para a lista de participantes */
        .name-list {
            list-style-type: none;
            padding: 0;
            text-align: center;
        }

        /* Estilo para cada item da lista */
        .name-list li {
            padding: 5px;
            font-size: 18px;
        }
    </style>
</head>

<body>
    <main class="main-content">
        <!-- Navega√ß√£o com os bot√µes In√≠cio e Sobre -->
        <div class="buttons__nav__menu">
            <button class="button__nav__menu__inicio" onclick="location.href='index.html'">In√≠cio</button>
            <button class="button__nav__menu__sobre" onclick="location.href='about.html'">Sobre</button>
        </div>

        <!-- Cabe√ßalho com o t√≠tulo e a imagem do amigo secreto -->
        <header class="header-banner">
            <h1 class="main-title">Amigo Secreto</h1>
            <img src="assets/amigo-secreto.png" alt="Imagem representativa de amigo secreto">
        </header>

        <!-- Se√ß√£o de adi√ß√£o de participantes -->
        <section class="input-section">
            <h2 class="section-title">Adicione os participantes</h2>
            <div class="input-wrapper">
                <!-- Campo de input para digitar o nome do participante -->
                <input type="text" id="amigo" class="input-name" placeholder="Digite um nome">
                <!-- Bot√£o para adicionar o nome √† lista -->
                <button class="button-add" onclick="adicionarAmigo()">Adicionar</button>
            </div>

            <!-- Lista de participantes adicionados -->
            <ul id="listaAmigos" class="name-list"></ul>

            <!-- Bot√£o para realizar o sorteio -->
            <button class="button-draw" onclick="realizarSorteio()">Sortear</button>

            <h2 class="section-title">Digite seu nome para ver seu amigo secreto</h2>
            <div class="input-wrapper">
                <!-- Campo de input para o participante digitar seu nome e ver o amigo secreto -->
                <input type="text" id="nomeParticipante" class="input-name" placeholder="Seu nome">
                <!-- Bot√£o para o participante ver seu amigo secreto -->
                <button class="button-draw" onclick="sortearParaParticipante()">Ver amigo secreto</button>
            </div>

            <!-- Bot√£o para reiniciar o sorteio -->
            <div class="button-container">
                <button class="button-reiniciar" onclick="reiniciarSorteio()">Reiniciar sorteio</button>
            </div>
        </section>

        <!-- Rodap√© com informa√ß√µes do desenvolvedor -->
        <footer class="rodape">
            <p><a href="https://github.com/barbiedeti"> Criado com üíª e ‚òï por: CodeOnTheSpectrum</a></p>
            <p>&copy; 2025 Amigo Secreto Alura + ONE G8</p>
        </footer>
    </main>

    <script>
        let amigos = []; // Array que armazena os participantes
        let sorteio = {}; // Objeto que mapeia cada participante ao seu amigo secreto
        let amigosSorteados = []; // Array que armazena os nomes dos participantes que j√° viram seu amigo secreto
        let sorteioRealizado = false; // Flag para indicar se o sorteio j√° foi realizado

        // Fun√ß√£o para adicionar um novo amigo √† lista
        function adicionarAmigo() {
            if (sorteioRealizado) {
                alert('O sorteio j√° foi realizado! Reinicie para adicionar novos participantes.');
                return;
            }

            const nomeAmigo = document.getElementById('amigo').value.trim();

            if (!nomeAmigo) {
                alert('Por favor, insira um nome antes de adicionar.');
                return;
            }

            if (amigos.includes(nomeAmigo)) {
                alert('Este nome j√° est√° na lista.');
                return;
            }

            amigos.push(nomeAmigo); // Adiciona o nome √† lista de amigos
            atualizarLista(); // Atualiza a exibi√ß√£o da lista
            document.getElementById('amigo').value = ''; // Limpa o campo de input
        }

        // Fun√ß√£o para atualizar a lista de participantes na tela
        function atualizarLista() {
            const lista = document.getElementById('listaAmigos');
            lista.innerHTML = amigos.map(amigo => `<li>${amigo}</li>`).join('');
        }

        // Fun√ß√£o para embaralhar os nomes (para garantir que o sorteio seja aleat√≥rio)
        function embaralhar(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Troca os elementos
            }
        }

        // Fun√ß√£o para realizar o sorteio
        function realizarSorteio() {
            if (amigos.length < 4) {
                alert('√â necess√°rio pelo menos 4 participantes para o sorteio!');
                return;
            }
            if (amigos.length % 2 !== 0) {
                alert('O n√∫mero de participantes deve ser par para realizar o sorteio!');
                return;
            }

            sorteioRealizado = true; // Marca o sorteio como realizado

            let participantes = [...amigos]; // Cria uma c√≥pia dos participantes
            embaralhar(participantes); // Embaralha a lista de participantes
            let sorteados = [...participantes]; // Cria uma c√≥pia para os sorteados
            
            // Garante que ningu√©m tire a si mesmo como amigo secreto
            for (let i = 0; i < participantes.length; i++) {
                if (participantes[i] === sorteados[i]) {
                    embaralhar(sorteados);
                    i = -1;
                }
            }

            sorteio = {}; // Reseta o objeto de sorteio
            for (let i = 0; i < participantes.length; i++) {
                sorteio[participantes[i]] = sorteados[i]; // Mapeia cada participante ao seu amigo secreto
            }

            atualizarListaSorteada(); // Atualiza a lista com a indica√ß√£o do sorteio realizado
            alert('Sorteio realizado! Agora cada participante pode ver seu amigo secreto individualmente.');
        }

        // Fun√ß√£o para atualizar a lista visualmente ap√≥s o sorteio
        function atualizarListaSorteada() {
            const lista = document.getElementById('listaAmigos');
            lista.innerHTML = amigos.map(amigo => 
                `<li class="sorted-list">${amigo} <span>‚ùì</span></li>`
            ).join('');
        }

        // Fun√ß√£o para o participante ver seu amigo secreto
        function sortearParaParticipante() {
            const nome = document.getElementById('nomeParticipante').value.trim();
            
            if (!sorteio[nome]) {
                alert('Nome n√£o encontrado na lista de participantes ou sorteio ainda n√£o foi realizado.');
                return;
            }

            if (amigosSorteados.includes(nome)) {
                alert('Amigo Secreto j√° revelado.');
                return;
            }

            alert(`ATEN√á√ÉO! Grave bem seu amigo secreto, ele n√£o ser√° mostrado novamente!\n\nSeu amigo secreto √©: ${sorteio[nome]}`);
            amigosSorteados.push(nome); // Marca o participante como que j√° viu seu amigo secreto
            document.getElementById('nomeParticipante').value = ''; // Limpa o campo de input
        }

        // Fun√ß√£o para reiniciar o sorteio
        function reiniciarSorteio() {
            amigos = [];
            sorteio = {};
            amigosSorteados = [];
            sorteioRealizado = false;

            document.getElementById('listaAmigos').innerHTML = ''; // Limpa a lista de amigos
            document.getElementById('nomeParticipante').value = ''; // Limpa o campo de nome
        }
    </script>
</body>
</html>


